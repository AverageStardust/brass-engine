// library : Brass Engine
// version : 0.17.0dev
// author  : Wyatt Durbano (WD_STEVE)
// required: p5
// optional: p5.sound, matter.js, regl.js
!function(t,i){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var r=e(i),n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},n(t,i)};
/******************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
/* global Reflect, Promise */function o(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=t}n(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}function a(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function s(t,i){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,n,o=e.call(t),a=[];try{for(;(void 0===i||i-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){n={error:t}}finally{try{r&&!r.done&&(e=o.return)&&e.call(o)}finally{if(n)throw n.error}}return a}function h(t,i,e){if(e||2===arguments.length)for(var r,n=0,o=i.length;n<o;n++)!r&&n in i||(r||(r=Array.prototype.slice.call(i,0,n)),r[n]=i[n]);return t.concat(r||Array.prototype.slice.call(i))}var l=function(t){var i;void 0===t&&(t={}),this.resolution=null!==(i=t.resolution)&&void 0!==i?i:.5};function u(t,i){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];return d(Object.hasOwn(t,"prototype"),"Can't bind context to function (".concat(t.name,"); Use the Function keyword and do not bind before-hand")),t.bind.apply(t,h([i],s(e),!1))}function d(t,i){if(void 0===i&&(i="Assertion failed"),!t)throw Error(i)}var c=!1;function f(){return d(!1,"Could not access regl; Include regl.js and enable it in Brass.init() first"),null}function y(){c&&(f()._refresh(),c=!1)}var p=function(){function t(t,i){void 0===i&&(i=t),this.id=Symbol(),this.creator=t,this.resizer=i,this.setMaps(null)}return t.prototype.hasSize=function(){return null!==this.size},t.prototype.getSize=function(t){return void 0===t&&(t=1),null===this.size&&this.throwSizeError(),{x:this.size.x*t,y:this.size.y*t}},t.prototype.sizeMaps=function(t){if(null===this.size)this.setMaps(this.creator(t));else{if(this.size.x===t.x&&this.size.y===t.y)return;this.setMaps(this.resizer(t,this.maps))}this.size=t},t.prototype.setMaps=function(t){null===t?(this.maps,new Proxy({},{get:this.throwSizeError})):this.maps=new Proxy(t,{get:this.getMap.bind(this)})},t.prototype.getMap=function(t,i){if(!Object.hasOwn(t,i))throw Error("Can't get (".concat(i,") map in DrawTarget"));return t[i]},t.prototype.throwSizeError=function(){throw Error("Could not use drawing layer, size has not been set")},t}(),v=new Map;function g(t){var i=v.get(t);if(void 0===i)throw Error("Could not find (".concat(t,") DrawTarget; Maybe create one or run Brass.init() with drawTarget enabled"));return i}function w(t,i){var e=g(t);if(!(e instanceof i))throw Error("Could not find (".concat(t,") P5DrawTarget; DrawTarget under that name is not of subclass P5DrawTarget"));return e}var m=v.has.bind(v),b=function(t){function i(i,e,r){void 0===e&&(e=i);var n=t.call(this,i,e)||this;return n.size=null,n.sizer=null!=r?r:n.defaultSizer,n}return o(i,t),i.prototype.setSizer=function(t){this.sizer=t,this.ensureSize(),this.refresh()},i.prototype.getMaps=function(){return this.ensureSize(),this.maps},i.prototype.ensureSize=function(){null===this.size&&(this.size=this.getSizerResult(),this.setMaps(this.creator(this.size)))},i.prototype.refresh=function(t){var i,e,r,n;void 0===t&&(t=[]);var o=this.getSizerResult();if(null===this.size||this.size.x!==o.x||this.size.y!==o.y){try{for(var s=a(t),h=s.next();!h.done;h=s.next()){if(h.value===this.id)throw Error("Resize of DrawTarget caused itself to resize; Loop in sizer dependency chain")}}catch(t){i={error:t}}finally{try{h&&!h.done&&(e=s.return)&&e.call(s)}finally{if(i)throw i.error}}this.sizeMaps(o);try{for(var l=a(v.values()),u=l.next();!u.done;u=l.next()){var d=u.value;d.id!==this.id&&d.refresh(t.concat(this.id))}}catch(t){r={error:t}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}}},i.prototype.hasName=function(t){return!!m(t)&&g(t).id===this.id},i.prototype.getSizerResult=function(){var t=this.sizer(this);return{x:Math.floor(t.x),y:Math.floor(t.y)}},i.prototype.defaultSizer=function(t){if(!m("default"))throw Error("Can't use draw target, run Brass.init() first");return t.hasName("default")?{x:undefined,y:undefined}:g("default").getSize()},i}(p);function x(){return w("defaultCanvas",C)}var C=function(t){function i(i){return t.call(this,(function(t){var i=t.x,e=t.y,r=document.createElement("CANVAS");return r.width=i,r.height=e,{canvas:r}}),(function(t,i){var e=t.x,r=t.y,n=i.canvas;return n.width=e,n.height=r,f(),c||(c=!0,queueMicrotask(y)),{canvas:n}}),i)||this}return o(i,t),i}(b),S=function(){function t(){}return t.prototype.watch=function(t){return new Proxy(this,{get:this.getWatchedValue.bind(this,t),set:this.setWatchedValue.bind(this,t)})},t.prototype.getWatchedValue=function(t,i,e){var r=Reflect.get(this,e);return"function"==typeof r?this.watchedVectorMethodWrapper.bind(this,t,r):r},t.prototype.setWatchedValue=function(t,i,e,r){var n=Reflect.get(this,e);return!!Reflect.set(this,e,r)&&(n===r||t(this),!0)},t.prototype.watchedVectorMethodWrapper=function(t,i){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];for(var n=this.array,o=i.call.apply(i,h([this],s(e),!1)),a=this.array,l=0;l<n.length;l++)if(n[l]!==a[l]){t(this);break}return o},t}(),M=function(t){function i(i,e){void 0===i&&(i=0),void 0===e&&(e=0);var r=t.call(this)||this;return r.x=i,r.y=e,r}return o(i,t),i.fromObj=function(t){if("number"!=typeof t.x||"number"!=typeof t.y)throw Error("Object can't be transformed into Vector2 without numeric x and y properties");return new i(t.x,t.y)},i.fromObjFast=function(t){return new i(t.x,t.y)},i.fromDir=function(t){return new i(Math.cos(t),Math.sin(t))},i.fromDirMag=function(t,e){return new i(e*Math.cos(t),e*Math.sin(t))},i.prototype.copy=function(){return new i(this.x,this.y)},i.prototype.equal=function(t){return this.x===t.x&&this.y===t.y},i.prototype.equalScalar=function(t,i){return void 0===i&&(i=t),this.x===t&&this.y===i},i.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},i.prototype.setScalar=function(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.x=t,this.y=i,this},i.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},i.prototype.addScalar=function(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.x+=t,this.y+=i,this},i.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},i.prototype.subScalar=function(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.x-=t,this.y-=i,this},i.prototype.mult=function(t){return this.x*=t.x,this.y*=t.y,this},i.prototype.multScalar=function(t,i){return void 0===t&&(t=1),void 0===i&&(i=t),this.x*=t,this.y*=i,this},i.prototype.div=function(t){return this.x/=t.x,this.y/=t.y,this},i.prototype.divScalar=function(t,i){return void 0===t&&(t=1),void 0===i&&(i=t),this.x/=t,this.y/=i,this},i.prototype.rem=function(t){return this.x%=t.x,this.y%=t.y,this},i.prototype.remScalar=function(t,i){return void 0===t&&(t=1),void 0===i&&(i=t),this.x%=t,this.y%=i,this},i.prototype.mod=function(t){return this.x=(this.x%t.x+t.x)%t.x,this.y=(this.y%t.y+t.y)%t.y,this},i.prototype.modScalar=function(t,i){return void 0===t&&(t=1),void 0===i&&(i=t),this.x=(this.x%t+t)%t,this.y=(this.y%i+i)%i,this},i.prototype.abs=function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this},i.prototype.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},i.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},i.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},i.prototype.mix=function(t,i){return this.x=this.x+(t.x-this.x)*i,this.y=this.y+(t.y-this.y)*i,this},i.prototype.norm=function(t){void 0===t&&(t=1);var i=this.mag;if(0===i)return this;var e=t/i;return this.x*=e,this.y*=e,this},i.prototype.normArea=function(t){void 0===t&&(t=1);var i=this.area;if(0===i)return this;var e=Math.sqrt(t/i);return this.x*=e,this.y*=e,this},i.prototype.limit=function(t){return void 0===t&&(t=1),this.mag>t&&this.norm(t),this},i.prototype.min=function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},i.prototype.minScalar=function(t,i){return void 0===i&&(i=t),this.x=Math.min(this.x,t),this.y=Math.min(this.y,i),this},i.prototype.max=function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},i.prototype.maxScalar=function(t,i){return void 0===i&&(i=t),this.x=Math.max(this.x,t),this.y=Math.max(this.y,i),this},i.prototype.setAngle=function(t){var i=this.mag;return this.x=Math.cos(t)*i,this.y=Math.sin(t)*i,this},i.prototype.angleTo=function(t){return Math.atan2(t.y-this.y,t.x-this.x)},i.prototype.angleBetween=function(t){var i=(this.x*t.x+this.y*t.y)/(Math.hypot(this.x,this.y)*Math.hypot(t.x,t.y));return Math.acos(Math.max(0,Math.min(1,i)))},i.prototype.rotate=function(t){var i=Math.cos(t),e=Math.sin(t),r=this.x*i-this.y*e;return this.y=this.x*e+this.y*i,this.x=r,this},i.prototype.dot=function(t){return this.x*t.x+this.y*t.y},i.prototype.cross=function(t){var i=this.x*t.y+this.y*t.y,e=t.y*this.x-t.x-this.y;this.x=i,this.y=e},i.prototype.dist=function(t){return Math.hypot(this.x-t.x,this.y-t.y)},i.prototype.distSq=function(t){var i=this.x-t.x,e=this.y-t.y;return i*i+e*e},Object.defineProperty(i.prototype,"xy",{get:function(){return new i(this.x,this.y)},set:function(t){var i;i=s(t.array,2),this.x=i[0],this.y=i[1]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"yx",{get:function(){return new i(this.y,this.x)},set:function(t){var i;i=s(t.array,2),this.y=i[0],this.x=i[1]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mag",{get:function(){return Math.hypot(this.x,this.y)},set:function(t){this.norm(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"magSq",{get:function(){return this.x*this.x+this.y*this.y},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"area",{get:function(){return this.x*this.y},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"angle",{get:function(){return Math.atan2(this.y,this.x)},set:function(t){this.setAngle(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"array",{get:function(){return[this.x,this.y]},set:function(t){var i=s(t,2),e=i[0],r=i[1];this.x=e,this.y=r},enumerable:!1,configurable:!0}),i}(S);function k(){return{reflectivity:0,indexOfRefraction:1,scattering:0,transmissionCurve:new Array(256).fill(1)}}var z=function(t){function i(i,e,r){var n=t.call(this,i,e)||this;return n.radius=r,n}return o(i,t),i.prototype.getProperties=function(){return[this.radius]},i.prototype.javascriptFunction=function(t,i){return t.mag-i},i.propertyCount=1,i.glslFunction="\n(vec2 location, float radius) { \n\treturn length(location) - radius;\n}\n",i}(function(){function t(t,i){this.position=new M(t,i)}return t.prototype.getSdf=function(t){var i=t.copy().sub(this.position);return this.javascriptFunction.apply(this,h([i],s(this.getProperties()),!1))},t}()),T=function(t){function i(i){var e,r,n,o,a,s=this;(s=t.call(this,i)||this).materialIndexMap=new Map,s.materialNames=new Array(256).fill(null),s.materials=new Array(256).fill(null).map(k),s.getTilemapMaterial=null!==(e=i.getTilemapMaterial)&&void 0!==e?e:s.defaultgetTilemapMaterial,(null===(r=i.setDefaultMaterials)||void 0===r||r)&&(s.setMaterial("air",k()),s.setMaterial("solid",(void 0===o&&(o=215),void 0===a&&(a=40),{reflectivity:1,indexOfRefraction:1,scattering:1.57,transmissionCurve:new Array(256).fill(1).map((function(t,i){return Math.abs(i-o)<a?1:.2}))})),s.setMaterial("glass",function(t,i){return void 0===t&&(t=127),void 0===i&&(i=110),{reflectivity:0,indexOfRefraction:1.52,scattering:.05,transmissionCurve:new Array(256).fill(1).map((function(e,r){return Math.abs(r-t)<i?1:.5}))}}())),s.tilemap=i.tilemap;var h=null!==(n=i.sdfTypes)&&void 0!==n?n:[z];return s.sdfTypeMap=new Map(h.map((function(t,i){return[t,i]}))),console.log(function(t){var i=t.map((function(t){var i=t.glslFunction.trim();return"float find".concat(t.name," ").concat(i)})),e=t.map((function(t,i){for(var e=["location"],r=0;r<t.propertyCount;r++)e.push("getSdfData(address + ".concat(3+r,")"));var n="find".concat(t.name,"(").concat(e.join(", "),")");return"\t\tcase ".concat(i,":\n\t\t\treturn ").concat(n,";")}));i.push("\nfloat findSdf(vec2 position, int address) {\n\tint sdfType = int(getSdfData(address));\n\tvec2 location = position - vec2(getSdfData(address + 1), getSdfData(address + 2));\n\t\n\tswitch(sdfType) {\n".concat(e.join("\n"),"\n\t}\n\t\n\treturn 1e20; // failed to find sdf\n}\n").trim());var r=i.join("\n\n");return"\n#version 100\n\nprecision mediump float;\nprecision mediump int;\n\nfloat getSdfData(int address) {\n\n}\n\n".concat(r,"\n\nvoid main() {\n\tgl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\n}\n\t").trim()}(h)),s}return o(i,t),i.prototype.setMaterial=function(t,i){for(var e=0;e<256;e++){var r=this.materialNames[e];if(null===r||r===t)return this.materialIndexMap.set(t,e),this.materialNames[e]=t,void(this.materials[e]=i)}throw Error("Failed to assign new material, all 256 material indices in use.")},i.prototype.deleteMaterial=function(t){this.materialIndexMap.delete(t)},i.prototype.begin=function(t,i){return void 0===t&&(t=function(){throw new Error("Function not implemented.")}()),void 0===i&&(i=x()),this.lastTilemapIdentity!==this.tilemap.identity&&(this.lastTilemapIdentity=this.tilemap.identity),this},i.prototype.end=function(t){return void 0===t&&(t=x()),this},i.prototype.defaultgetTilemapMaterial=function(t,i,e){return t.getSolid(i,e)?"solid":"air"},i}(l);var P=0;function O(){return P}function A(){return window.performance.now()}function I(t,i,e,r){return new E(t,i,e,r)}P=Math.round(A());var E=function(t){function i(i,e,n,o){void 0===n&&(n=P2D);var a=this,s=document.createElement("canvas");return(a=t.call(this,s,o)||this)._glAttributes={},function(t,i){for(var e in t.pInst=null!=i?i:window,r.default.prototype)t[e]||("function"==typeof r.default.prototype[e]?t[e]=r.default.prototype[e].bind(t):t[e]=r.default.prototype[e]);r.default.prototype._initializeInstanceVariables.apply(t)}(a,o),a.canvas=s,a.width=i,a.height=e,a._pixelDensity=a.pInst.pixelDensity(),n===WEBGL?a._renderer=new r.default.RendererGL(a.canvas,a,!1):a._renderer=new r.default.Renderer2D(a.canvas,a,!1),a._renderer.resize(i,e),a._renderer._applyDefaults(),a}return o(i,t),i.prototype.reset=function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()},i.prototype.remove=function(){for(var t in this._events)this.elt.removeEventListener(t,this._events[t])},i}(r.default.Element);var F=function(){function t(t,i,e,r){this.pool=Array(t).fill(null).map(e),this.limited=i,this.generator=e,this.cleaner=null!=r?r:function(t){return t}}return t.prototype.get=function(){if(this.pool.length<=0){if(this.limited)throw Error("Limited pool ran out of objects");return this.generator()}return this.cleaner(this.pool.pop())},t.prototype.release=function(t){this.pool.push(t)},Object.defineProperty(t.prototype,"size",{get:function(){return this.pool.length},enumerable:!1,configurable:!0}),t}();function j(){return w("defaultP5",B)}!function(t){function i(i){return void 0===i&&(i=P2D),t.call(this,(function(t){var e=t.x,r=t.y;return"string"==typeof i?{canvas:I(e,r,i)}:(i.width===e&&i.height===r||i.resizeCanvas(e,r,!0),{canvas:i})}),(function(t,i){var e=t.x,r=t.y,n=i.canvas;return n.resizeCanvas(e,r,!0),{canvas:n}}))||this}o(i,t)}(function(t){function i(i,e){void 0===e&&(e=i);var r=t.call(this,i,e)||this;return r.size=null,r}return o(i,t),i.prototype.getMaps=function(t){return void 0===t?null===this.size&&this.throwSizeError():this.sizeMaps(t),this.maps},i}(p));var B=function(t){function i(i,e){return void 0===e&&(e=P2D),t.call(this,(function(t){var i=t.x,r=t.y;return"string"==typeof e?{canvas:I(i,r,e)}:(e.width===i&&e.height===r||e.resizeCanvas(i,r,!0),{canvas:e})}),(function(t,i){var e=t.x,r=t.y,n=i.canvas;return n.resizeCanvas(e,r,!0),{canvas:n}}),i)||this}return o(i,t),i}(b);function D(){throw Error("Could not find default viewpoint; maybe run Brass.init() first")}!function(t){function i(i,e,r){return void 0===i&&(i=100),void 0===e&&(e=new M),void 0===r&&(r={}),t.call(this,i,e,r)||this}o(i,t),i.prototype.update=function(){},i.prototype.getViewOrigin=function(){return new M(0,0)}}(function(){function t(t,i,e){var r,n,o;void 0===e&&(e={}),this.shakeStrength=0,this.shakeDecay=0,this.scale=t,this.translation=i,this.integerTranslation=null===(r=e.integerTranslation)||void 0===r||r,this.integerScaling=null!==(n=e.integerScaling)&&void 0!==n&&n,this.shakeSpeed=null!==(o=e.shakeSpeed)&&void 0!==o?o:.015,this.shakePosition=new M}return t.prototype.view=function(t){void 0===t&&(t=j());var i=t.getMaps().canvas,e=this.getViewOrigin(t);i.translate(e.x,e.y),i.scale(this.effectiveScale);var r=this.effectiveTranslation;i.translate(-r.x,-r.y),i.translate(-this.shakePosition.x,-this.shakePosition.y)},t.prototype.getScreenViewArea=function(t){void 0===t&&(t=j());var i=t.getMaps().canvas,e=this.getViewOrigin(t);return{minX:0-e.x,maxX:i.width-e.x,minY:0-e.y,maxY:i.height-e.y}},t.prototype.getWorldViewArea=function(t){void 0===t&&(t=j());var i=t.getMaps().canvas,e=this.screenToWorld(new M),r=e.x,n=e.y,o=this.screenToWorld(new M(i.width,i.height));return{minX:r,minY:n,maxX:o.x,maxY:o.y}},t.prototype.traslateScreen=function(t){var i=t.copy().divScalar(this.effectiveScale);this.translation.add(i)},t.prototype.screenToWorld=function(t,i){void 0===i&&(i=j());var e=t.copy(),r=this.getViewOrigin(i);e.sub(r),e.divScalar(this.effectiveScale);var n=this.effectiveTranslation;return e.add(n),e.add(this.shakePosition),e},t.prototype.worldToScreen=function(t,i){void 0===i&&(i=j());var e=t.copy();e.sub(this.shakePosition);var r=this.effectiveTranslation;e.sub(r),e.multScalar(this.effectiveScale);var n=this.getViewOrigin(i);return e.add(n),e},Object.defineProperty(t.prototype,"effectiveTranslation",{get:function(){return this.integerTranslation?this.translation.copy().multScalar(this.effectiveScale).round().divScalar(this.effectiveScale):this.translation.copy()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"effectiveScale",{get:function(){return this.integerScaling?this.scale>1?Math.round(this.scale):1/Math.round(1/this.scale):this.scale},enumerable:!1,configurable:!0}),t.prototype.shake=function(t,i){void 0===i&&(i=1e3),this.shakeStrength+=t,this.shakeDecay+=t/i},t.prototype.updateShake=function(t){this.shakeStrength-=this.shakeDecay*t,this.shakeStrength<=0&&(this.shakeStrength=0,this.shakeDecay=0),this.shakePosition.x=.3*noise(8104,O()*this.shakeSpeed*2)+.7*noise(9274,O()*this.shakeSpeed/2),this.shakePosition.y=.3*noise(5928,O()*this.shakeSpeed*2)+.7*noise(2395,O()*this.shakeSpeed/2),this.shakePosition.subScalar(.5).multScalar(this.shakeStrength)},t}());var _={any:Array,int8:Int8Array,int16:Int16Array,int32:Int32Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,float32:Float32Array,float64:Float64Array};function V(t,i){var e,r=W(t);return"any"===t?new((e=r).bind.apply(e,h([void 0],s(i),!1))):new r(i)}function X(t){for(var i=new Uint8Array(t.buffer),e=[],r=0;r<i.byteLength;r++)e.push(String.fromCharCode(i[r]));return btoa(e.join(""))}function Y(t,i){for(var e=window.atob(i),r=new Uint8Array(e.length),n=0;n<r.byteLength;n++)r[n]=e.charCodeAt(n);return function(t,i){return new(W(t))(i)}(t,r.buffer)}function W(t){var i=_[t];if(void 0===i)throw Error("Can't find type (".concat(t,") array constructor"));return i}var R=function(){function t(){var t;this.sensors=[],this.alive=!0,this.data=null,void 0===(t="creating a physics body")&&(t=""),d(!1,"Failed ".concat(t,", Matter physics is not running"))}return t.prototype.addSensor=function(t){return this.sensors.push(t),this},t.prototype.removeSensor=function(t){var i=[].findIndex((function(i){return i===t}));return this.sensors.splice(i,1),this},t.prototype.triggerSensors=function(t){return this.sensors.forEach((function(i){return i(t)})),this},t.prototype.kill=function(){this.alive=!1},t.prototype.validateCollisionIndex=function(t){if("number"!=typeof t||t!==Math.floor(t))throw Error("Collision category must be an integer");if(t<0||t>31)throw Error("Collision category must be in 0 through 31 inclusive");return t},t.prototype.validateCollisionMask=function(t){if("number"!=typeof t||t!==Math.floor(t))throw Error("Collision mask must be an integer");if(t<0||t>4294967295)throw Error("Collision mask must be 32-bit");return t},t.prototype.collisionIndexToCategory=function(t){return this.validateCollisionIndex(t),1<<t},t.prototype.collisionCategoryToIndex=function(t){if(32768===t)return 31;var i=Math.log2(t);if(i!==Math.floor(i))throw Error("Internal Matter.js body could not be fit in one collision category");return i},t}(),N=Array(32).fill(null).map((function(){return new Map})),U=function(t){function i(i){var e=t.call(this)||this;return e.setBody(i),e}return o(i,t),i.prototype.setBody=function(t){void 0!==this.body&&this.remove(),this.body=t,this.body.__brassBody__=this,this.body.collisionFilter.category=this.collisionIndexToCategory(0),N[0].set(this.body.id,this),Matter.World.add(void 0,t)},Object.defineProperty(i.prototype,"position",{get:function(){return M.fromObj(this.body.position).divScalar(void 0).watch(this.positionWatcherMethod.bind(this))},set:function(t){var i=void 0;t=Matter.Vector.create(t.x*i,t.y*i),Matter.Body.setPosition(this.body,t)},enumerable:!1,configurable:!0}),i.prototype.positionWatcherMethod=function(t){this.position=t},Object.defineProperty(i.prototype,"velocity",{get:function(){return M.fromObj(this.body.velocity).divScalar(void 0).watch(this.velocityWatcherMethod.bind(this))},set:function(t){var i=void 0;t=Matter.Vector.create(t.x*i,t.y*i),Matter.Body.setVelocity(this.body,t)},enumerable:!1,configurable:!0}),i.prototype.velocityWatcherMethod=function(t){this.velocity=t},Object.defineProperty(i.prototype,"angle",{get:function(){return this.body.angle},set:function(t){Matter.Body.setAngle(this.body,t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"angularVelocity",{get:function(){return this.body.angularVelocity},set:function(t){Matter.Body.setAngularVelocity(this.body,t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"static",{get:function(){return this.body.isStatic},set:function(t){Matter.Body.setStatic(this.body,t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ghost",{get:function(){return this.body.isSensor},set:function(t){this.body.isSensor=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"collisionCategory",{set:function(t){var i=this.collisionCategoryToIndex(this.body.collisionFilter.category);N[i].delete(this.body.id),this.body.collisionFilter.category=this.collisionIndexToCategory(t),N[t].set(this.body.id,this)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"collidesWith",{set:function(t){var i=this;this.body.collisionFilter.mask=0,"everything"===t?this.body.collisionFilter.mask=4294967295:"nothing"===t?this.body.collisionFilter.mask=0:Array.isArray(t)?t.map((function(t){return i.setCollidesWith(t)})):this.setCollidesWith(t)},enumerable:!1,configurable:!0}),i.prototype.setCollidesWith=function(t){return this.validateCollisionIndex(t),t>=0?this.body.collisionFilter.mask|=1<<t:this.body.collisionFilter.mask&=~(1<<-t),this},i.prototype.rotate=function(t){return Matter.Body.rotate(this.body,t),this},i.prototype.applyForce=function(t,i){void 0===i&&(i=this.position);var e=void 0,r=Matter.Vector.create(NaN*t.x,NaN*t.y),n=Matter.Vector.create(i.x*e,i.y*e);return queueMicrotask(Matter.Body.applyForce.bind(globalThis,this.body,n,r)),this},i.prototype.kill=function(){t.prototype.kill.call(this),this.remove()},i.prototype.remove=function(){var t=this.collisionCategoryToIndex(this.body.collisionFilter.category);N[t].delete(this.body.id),Matter.World.remove(void 0,this.body)},i}(R),L=function(t){function i(i,e,r,n,o){void 0===n&&(n={}),void 0===o&&(o=1);var a,s=this;s=t.call(this,Matter.Body.create({}))||this,null!==(a=n.isStatic)&&void 0!==a||(n.isStatic=!0);var h={x:0,y:0};return n.position&&(h=n.position,n.position={x:0,y:0}),s.x=h.x,s.y=h.y,s.width=i,s.height=e,s.gridScale=o,s.options=n,s.buildBody(r),s}return o(i,t),i.prototype.buildBody=function(t,i,e,r,n){var o;void 0===i&&(i=0),void 0===e&&(e=0),void 0===r&&(r=1/0),void 0===n&&(n=1/0);var a=void 0;if(this.static)this.buildParts(t,i,e,r,n),Matter.Body.translate(this.body,{x:this.body.bounds.min.x+(this.x-i*this.gridScale)*a,y:this.body.bounds.min.y+(this.y-e*this.gridScale)*a});else{var s=null!==(o=this.options.angle)&&void 0!==o?o:0;void 0!==this.body&&(s=this.body.angle,Matter.Body.setAngle(this.body,0)),this.buildParts(t,i,e,r,n),Matter.Body.setAngle(this.body,s),Matter.Body.setPosition(this.body,{x:this.x*a,y:this.y*a})}},Object.defineProperty(i.prototype,"static",{get:function(){return void 0===this.body?this.options.isStatic:this.body.isStatic},enumerable:!1,configurable:!0}),i.prototype.buildParts=function(t,i,e,r,n){for(var o,h,l,u,d=Math.max(0,i),c=Math.max(0,e),f=Math.min(this.width,r),y=Math.min(this.height,n),p=new Map,v=c;v<y;v++){for(var g=void 0,w=d;w<f;w++)t[w+v*this.width]?void 0===g&&(g=w):void 0!==g&&(p.set(g+v*this.width,{width:w-g,height:1}),g=void 0);void 0!==g&&p.set(g+v*this.width,{width:f-g,height:1})}var m=this.width,b=this.width*this.height;try{for(var x=a(p.entries()),C=x.next();!C.done;C=x.next())for(var S=s(C.value,2),M=S[0],k=S[1],z=M+m;z<b;z+=m){var T=p.get(z);if(void 0===T||T.width!==k.width)break;k.height+=T.height,p.delete(z)}}catch(t){o={error:t}}finally{try{C&&!C.done&&(h=x.return)&&h.call(x)}finally{if(o)throw o.error}}var P=[],O=void 0*this.gridScale;try{for(var A=a(p.entries()),I=A.next();!I.done;I=A.next()){var E=s(I.value,2),F=E[0],j=(k=E[1],q((w=F%this.width)*O,(v=Math.floor(F/this.width))*O,k.width*O,k.height*O));j.__brassBody__=this,P.push(j)}}catch(t){l={error:t}}finally{try{I&&!I.done&&(u=A.return)&&u.call(A)}finally{if(l)throw l.error}}var B=q(i*O,e*O,.01,.01);B.__brassBody__=this,P.push(B),this.options.parts=P;var D=Matter.Body.create(this.options);this.setBody(D)},i}(U);function q(t,i,e,r){var n={id:Matter.Common.nextId(),type:"body",label:"rectBody",plugin:{},parts:[],angle:0,vertices:[{x:.5*-e,y:.5*-r,index:0,isInternal:!1},{x:.5*e,y:.5*-r,index:1,isInternal:!1},{x:.5*e,y:.5*r,index:2,isInternal:!1},{x:.5*-e,y:.5*r,index:3,isInternal:!1}],position:{x:t+.5*e,y:i+.5*r},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,circleRadius:0,positionPrev:{x:t+.5*e,y:i+.5*r},anglePrev:0,area:0,mass:0,inertia:0,_original:null};return n.parts=[n],n.parent=n,Matter.Body.set(n,{bounds:Matter.Bounds.create(n.vertices),vertices:n.vertices}),Matter.Bounds.update(n.bounds,n.vertices,n.velocity),n}var G,H=function(){function t(t,i,e){var r,n,o,a;void 0===e&&(e={}),this.identity=Symbol(),this.width=t,this.height=i,this.tileSize=null!==(r=e.tileSize)&&void 0!==r?r:1,this.fields=[],this.fieldTypes=null!==(n=e.fields)&&void 0!==n?n:{_DEFAULTFIELD:"uint8"};var s=null!==(o=e.solidField)&&void 0!==o?o:"";if(void 0===this.fieldTypes[s])this.fieldTypes[s]="uint8";else if("uint8"!==this.fieldTypes[s])throw Error("Solid field must be of type uint8");for(var h in this.fields=[],this.fieldIds={},this.fieldTypes){var l=this.fieldTypes[h],u=h.toUpperCase();if(void 0!==this[u])throw Error("field name (".concat(u,") collided in tilemap namespace"));this[u]=this.fields.length,this.fieldIds[h]=this.fields.length,this.fields.push(this.createField(l))}this.solidFieldId=this.fieldIds[s],this.hasBody=!!e.body,this.autoMaintainBody=null===(a=e.autoMaintainBody)||void 0===a||a,this.getTileData=this.bindOptionFunction(e.getTileData,this.get),this.isTileSolid=this.bindNullableOptionFunction(e.isTileSolid);var d=this.fields[this.solidFieldId];if(null!==this.isTileSolid){var c=this.isTileSolid(this.getTileData(0,0))?1:0;d.data.fill(c)}if(this.body=null,this.hasBody){var f={};"object"==typeof e.body&&(f=e.body),this.body=new L(this.width,this.height,d.data,f,this.tileSize)}this.bodyValid=this.hasBody}return t.prototype.bindOptionFunction=function(t,i){return t?u(t,this):i},t.prototype.bindNullableOptionFunction=function(t){return t?u(t,this):null},t.prototype.maintain=function(){this.autoMaintainBody&&this.maintainBody()},t.prototype.maintainBody=function(t,i,e,r){if(null!==this.body&&!this.bodyValid){var n=this.fields[this.solidFieldId];this.body.buildBody(n.data,t,i,e,r),this.bodyValid=!0}},t.prototype.get=function(t,i,e){if(void 0===e&&(e=0),this.validateCoord(t,i)){var r=this.fields[e];if(r.sparse){var n=r.data["".concat(t,",").concat(i)];return void 0===n?null:n}return r.data[t+i*this.width]}},t.prototype.set=function(t,i,e,r){if(void 0===r&&(r=0),!this.validateCoord(i,e))return!1;var n=this.fields[r];return n.sparse?n.data["".concat(i,",").concat(e)]=t:n.data[i+e*this.width]=t,this.identity=Symbol(),this.clearCacheAtTile(i,e),this.updateSolidAtTile(i,e),!0},t.prototype.getSolid=function(t,i){var e=this.get(t,i,this.solidFieldId);if(void 0!==e)return Boolean(e)},t.prototype.export=function(){var t={};for(var i in this.fieldIds){var e=this.fieldIds[i],r=this.fieldTypes[i],n=this.fields[e].data;t[i]="sparse"===r?{type:"sparse",data:n}:"any"===r?{type:"any",data:n}:{type:r,data:X(n),encoding:r}}return{width:this.width,height:this.height,objects:[],tilesets:{},fields:t}},t.prototype.import=function(t){if(null===t)throw Error("Tried to import (null) as world; Did you pass Brass.getLevel() before the world loaded?");if(t.width>this.width||t.height>this.height)throw Error("Can't import world larger than tilemap");for(var i in this.clearCaches(),this.clearFields(),t.fields){var e=this.fieldIds[i];if(void 0===e)throw Error("Can't import field (".concat(i,"); field was not declared for the tilemap"));var r=this.fieldTypes[i],n=t.fields[i];if(void 0===r||r!==n.type)throw Error("Can't import field (".concat(i,"); field type did not match with any fields declared for the tilemap"));if("sparse"===n.type)this.fields[e]={sparse:!0,data:n.data};else{var o=void 0;if("encoding"in n){var a=Y(n.encoding,n.data);o=n.encoding!==n.type?V(n.type,a):a}else o=n.data;if(this.width===t.width&&this.height===t.height)this.fields[e].data=o;else for(var s=0;s<t.width;s++)for(var h=0;h<t.height;h++)this.fields[e].data[s+h*this.width]=o[s+h*t.width]}}for(s=0;s<t.width;s++)for(h=0;h<t.height;h++)this.updateSolidAtTile(s,h);this.identity=Symbol()},t.prototype.updateSolidAtTile=function(t,i){if(null!==this.isTileSolid){var e=this.fields[this.solidFieldId],r=this.isTileSolid(this.getTileData(t,i)),n=t+i*this.width;null!==this.body&&!!e.data[n]!==r&&(this.bodyValid=!1),e.data[n]=r?1:0}},t.prototype.clearFields=function(){for(var t in this.fieldIds){var i=this.fieldIds[t];if(i!==this.solidFieldId){var e=this.fieldTypes[t];this.fields[i]=this.createField(e)}}for(var r=0;r<this.width;r++)for(var n=0;n<this.height;n++)this.updateSolidAtTile(r,n)},t.prototype.createField=function(t){if("sparse"===t)return{sparse:!0,data:{}};var i=function(t,i){return new(W(t))(i)}(t,this.area);return{sparse:!1,data:i}},t.prototype.validateCoord=function(t,i){return t>=0&&t<this.width&&i>=0&&i<this.height},Object.defineProperty(t.prototype,"area",{get:function(){return this.width*this.height},enumerable:!1,configurable:!0}),t}(),J=function(t){function i(i,e,r){void 0===r&&(r={});var n,o,a,s,h,l,u,d,c=this;if((c=t.call(this,i,e,r)||this).drawCacheMode=null!==(n=r.drawCacheMode)&&void 0!==n?n:"never",c.drawCacheChunkSize=null!==(o=r.drawCacheChunkSize)&&void 0!==o?o:"never"===c.drawCacheMode?1:4,c.drawCacheTileResolution=null!==(a=r.drawCacheTileResolution)&&void 0!==a?a:64,c.drawCacheDecayTime=null!==(s=r.drawCacheDecayTime)&&void 0!==s?s:5e3,c.drawCachePadding=null!==(h=r.drawCachePadding)&&void 0!==h?h:0,c.drawCachePaddingTime=null!==(l=r.drawCachePaddingTime)&&void 0!==l?l:3,null!==(u=c.width/c.drawCacheChunkSize%1!=0)&&void 0!==u?u:c.height/c.drawCacheChunkSize%1!=0)throw Error("Tilemap width and height must be a multiple of drawCacheChunkSize");var f=c.width*c.height/c.drawCacheChunkSize/c.drawCacheChunkSize;if("never"===c.drawCacheMode)c.chunkPool=null,c.chunks=[],c.cacheableChunks=[];else{var y=c.drawCacheTileResolution*c.drawCacheChunkSize,p=null!==(d=r.drawCachePoolInitalSize)&&void 0!==d?d:Math.ceil(window.innerWidth*window.innerHeight/y/y);c.chunkPool=new F(p,!1,(function(){return{g:I(y,y),lastUsed:O()}}),(function(t){return{g:t.g,lastUsed:O()}})),c.chunks=Array(f).fill(null),c.cacheableChunks=Array(f).fill(null)}if(c.drawTile=c.bindOptionFunction(r.drawTile,c.defaultDrawTile),c.drawOrder=c.bindNullableOptionFunction(r.drawOrder),c.canCacheTile=c.bindNullableOptionFunction(r.canCacheTile),null===c.canCacheTile&&"check"===c.drawCacheMode)throw Error('drawCacheMode of "check" requires canCacheTile function in options');return c}return o(i,t),i.prototype.draw=function(t,i){void 0===t&&(t=D()),void 0===i&&(i=j());var e=i.getMaps().canvas,r=t.getWorldViewArea(i);r.minX=Math.max(0,r.minX/this.tileSize),r.minY=Math.max(0,r.minY/this.tileSize),r.maxX=Math.min(this.width,r.maxX/this.tileSize),r.maxY=Math.min(this.height,r.maxY/this.tileSize),r.minX=Math.floor(r.minX/this.drawCacheChunkSize),r.minY=Math.floor(r.minY/this.drawCacheChunkSize),r.maxX=Math.ceil(r.maxX/this.drawCacheChunkSize),r.maxY=Math.ceil(r.maxY/this.drawCacheChunkSize),push(),scale(this.tileSize);var n=!1;switch(this.drawCacheMode){default:throw Error('drawCacheMode should be "never", "check" or "always" not ('.concat(this.drawCacheMode,")"));case"never":this.drawTiles(r.minX,r.minY,r.maxX,r.maxY,e);break;case"always":n=!0;case"check":d(null!==this.chunkPool),this.padChunks(n,t,i);for(var o=r.minX;o<r.maxX;o++)for(var a=r.minY;a<r.maxY;a++)if(n||this.canCacheChunk(o,a))this.drawChunk(o,a,e);else{var s=o+a*(this.width/this.drawCacheChunkSize);null!==(l=this.chunks[s])&&(this.chunkPool.release(l),this.chunks[s]=null),this.drawTiles(Math.max(r.minX*this.drawCacheChunkSize,o*this.drawCacheChunkSize),Math.max(r.minY*this.drawCacheChunkSize,a*this.drawCacheChunkSize),Math.min(r.maxX*this.drawCacheChunkSize,(o+1)*this.drawCacheChunkSize),Math.min(r.maxY*this.drawCacheChunkSize,(a+1)*this.drawCacheChunkSize),e)}this.cacheableChunks.fill(null);for(var h=0;h<this.chunks.length;h++){var l;null!==(l=this.chunks[h])&&O()-l.lastUsed>this.drawCacheDecayTime&&(this.chunkPool.release(l),this.chunks[h]=null)}}pop()},i.prototype.padChunks=function(t,i,e){void 0===i&&(i=D()),d(null!==this.chunkPool);var r=i.getWorldViewArea(e);r.minX=Math.max(0,r.minX/this.tileSize-this.drawCachePadding),r.minY=Math.max(0,r.minY/this.tileSize-this.drawCachePadding),r.maxX=Math.min(this.width,r.maxX/this.tileSize+this.drawCachePadding),r.maxY=Math.min(this.height,r.maxY/this.tileSize+this.drawCachePadding),r.minX=Math.floor(r.minX/this.drawCacheChunkSize),r.minY=Math.floor(r.minY/this.drawCacheChunkSize),r.maxX=Math.ceil(r.maxX/this.drawCacheChunkSize),r.maxY=Math.ceil(r.maxY/this.drawCacheChunkSize);for(var n=A()+this.drawCachePaddingTime,o=!1,a=r.minX;a<r.maxX;a++)for(var s=r.minY;s<r.maxY;s++){var h=a+s*(this.width/this.drawCacheChunkSize),l=this.chunks[h];null===l?o||!t&&!this.canCacheChunk(a,s)||(l=this.chunkPool.get(),this.chunks[h]=l,this.renderChunk(a,s,l),A()>n&&(o=!0)):l.lastUsed=O()}},i.prototype.canCacheChunk=function(t,i){d(null!==this.canCacheTile);var e=t+i*(this.height/this.drawCacheChunkSize),r=this.cacheableChunks[e];if(null!==r)return r;for(var n=0;n<this.drawCacheChunkSize;n++)for(var o=0;o<this.drawCacheChunkSize;o++){var a=n+t*this.drawCacheChunkSize,s=o+i*this.drawCacheChunkSize,h=this.getTileData(a,s);if(!this.canCacheTile(h))return this.cacheableChunks[e]=!1,!1}return this.cacheableChunks[e]=!0,!0},i.prototype.renderChunk=function(t,i,e){var r,n,o=e.g;o.push(),o.clear(0,0,0,0),o.scale(this.drawCacheTileResolution);for(var s=[],h=0;h<this.drawCacheChunkSize;h++)for(var l=0;l<this.drawCacheChunkSize;l++){var u=h+t*this.drawCacheChunkSize,d=l+i*this.drawCacheChunkSize,c=this.getTileData(u,d);this.drawOrder?s.push({data:c,x:h,y:l,order:this.drawOrder(c)}):this.drawTile(c,h,l,o)}if(this.drawOrder){s.sort((function(t,i){return t.order-i.order}));try{for(var f=a(s),y=f.next();!y.done;y=f.next()){var p=y.value;this.drawTile(p.data,p.x,p.y,o)}}catch(t){r={error:t}}finally{try{y&&!y.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}}o.pop()},i.prototype.drawChunk=function(t,i,e){var r=this.maintainChunk(t,i);e.image(r,t*this.drawCacheChunkSize,i*this.drawCacheChunkSize,this.drawCacheChunkSize,this.drawCacheChunkSize)},i.prototype.maintainChunk=function(t,i){d(null!==this.chunkPool);var e=t+i*(this.width/this.drawCacheChunkSize),r=this.chunks[e];return(null===r||O()-r.lastUsed>this.drawCacheDecayTime)&&(null===r&&(r=this.chunkPool.get(),this.chunks[e]=r),this.renderChunk(t,i,r)),r.g},i.prototype.drawTiles=function(t,i,e,r,n){var o,s;n.push();for(var h=[],l=t;l<e;l++)for(var u=i;u<r;u++){var d=this.getTileData(l,u);this.drawOrder?h.push({data:d,x:l,y:u,order:this.drawOrder(d)}):this.drawTile(d,l,u,n)}if(this.drawOrder){h.sort((function(t,i){return t.order-i.order}));try{for(var c=a(h),f=c.next();!f.done;f=c.next()){var y=f.value;this.drawTile(y.data,y.x,y.y,n)}}catch(t){o={error:t}}finally{try{f&&!f.done&&(s=c.return)&&s.call(c)}finally{if(o)throw o.error}}}n.pop()},i.prototype.defaultDrawTile=function(t,i,e,r){r.noStroke();var n=(i+e)%2*255;r.fill(n),r.rect(i,e,1,1),r.fill(255-n),r.textAlign(CENTER,CENTER),r.textSize(.2),r.text(String(t),i+.5001,e+.5001)},i.prototype.clearCaches=function(){var t,i;if("never"!==this.drawCacheMode){d(null!==this.chunkPool);try{for(var e=a(this.chunks),r=e.next();!r.done;r=e.next()){var n=r.value;null!==n&&this.chunkPool.release(n)}}catch(i){t={error:i}}finally{try{r&&!r.done&&(i=e.return)&&i.call(e)}finally{if(t)throw t.error}}this.chunks.fill(null),this.cacheableChunks.fill(null)}},i.prototype.clearCacheAtTile=function(t,i){var e=Math.floor(t/this.drawCacheChunkSize)+Math.floor(i/this.drawCacheChunkSize)*(this.width/this.drawCacheChunkSize),r=this.chunks[e];null!=r&&(d(null!==this.chunkPool),this.chunkPool.release(r),this.chunks[e]=null)},i}(H);t.setup=function(){G=new J(32,32),new T({tilemap:G})},Object.defineProperty(t,"__esModule",{value:!0})}(this.globalThis=this.globalThis||{},p5);
